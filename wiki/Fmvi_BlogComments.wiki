

# Star rating

    * Hiển thị kết quả bình chọn dạng 5 ngôi sao.
    * Thông tin bình chọn gửi lên feedback. (không thông báo lên tường)
    * Hiển thị tooltip chi tiết.
    * Hiệu ứng sao rơi khi bình chọn.
    * Sử dụng ajax, không chuyển trang.
    * Quy ước:
        * Sao vàng: có thể bình chọn.
        * Sao đỏ: đã bình chọn hoặc bài của bạn.
        * Sao xám: tỉ lệ bình chọn 0%.



# Quick reply 4

    * Ưu điểm:
        * Hỗ trợ trích dẫn đơn, đa trích dẫn.
        * Kết quả hiển thị ngay lập tức.
        * Xem trước, gửi bài nhanh không chuyển trang.

    * Nhược điểm:
        * Chỉ hỗ trợ 22 biểu tượng cảm xúc thường dùng.
        * Khả năng chuyển nội dung từ bbcode code chưa toàn diện.
        * Không hỗ trợ bbcode rand, wow, custom bbcode.



Demo:
http://i12.servimg.com/u/f12/17/70/81/78/1-13-210.jpg
http://i12.servimg.com/u/f12/17/70/81/78/1-14-211.jpg
http://i12.servimg.com/u/f12/17/70/81/78/1-16-210.png



Hướng dẫn:

Thêm vào CSS (Bỏ qua phần star rating nếu đã có)

<code>
    /* star rating - www.fmvi.vn */
    .voteStar{background:url(http://i15.servimg.com/u/f15/16/58/89/73/star10.png) no-repeat scroll 0 0 transparent;width:16px;height:16px;display:inline-block}
    .v0{background-position:0 0}
    .v1{background-position:0 -16px}
    .v2{background-position:0 -32px}
    .v3{background-position:0 -48px}
    .v4{background-position:0 -64px}
    .votebutton{left:-64px;position:absolute;top:5px;z-index:10}
    .votebutton a{opacity:0.3;padding:0 7px}
    .votetip{text-align:center;background-color:#474747;margin-top:5px;padding:3px 7px}
    .voteBfmvi{position:relative;display:none;float:right}
    .voteBfmvi a:hover{opacity:1}
    .voteBfmvi:hover .voteshow{opacity:0.4}
    #firstvote .votebutton{top:0}
    .fmvistar,.fmviminus{height:10px;position:absolute;right:0;top:0;width:10px;margin:0}
    .rootvote{height:10px;left:553px;position:absolute;top:10px;width:10px;url(http://i12.servimg.com/u/f12/17/70/81/78/13580710.png);url(http://i12.servimg.com/u/f12/17/70/81/78/sticky10.png);url(http://i12.servimg.com/u/f12/17/70/81/78/like_b11.png);url(http://i12.servimg.com/u/f12/17/70/81/78/dislik11.png);url(http://i12.servimg.com/u/f12/17/70/81/78/13581110.png);url(http://i12.servimg.com/u/f12/17/70/81/78/13581111.png);url(http://i12.servimg.com/u/f12/17/70/81/78/13581112.png);url(http://i12.servimg.com/u/f12/17/70/81/78/13581113.png);url(http://i12.servimg.com/u/f12/17/70/81/78/13581114.png);url(http://i12.servimg.com/u/f12/17/70/81/78/13581115.png)}
    .rootvote img{display:none}
    /* Blog Comments - www.fmvi.vn */
    #baivong_rep{background-color:#FFF;border:1px solid #FFF;display:none;left:0;position:absolute;top:0;width:100%;z-index:99}
    .quickblog{background-color:#fff;position:relative;width:100%;padding:0}
    #quickblog_data{height:167px;font-size:1.2em;border:1px solid #ddd;top:0;left:0;width:812px;margin:0}
    .quickblog input{margin:10px 0 0}
    #baivong_rep span,.entry-content span{display:inline!important}
    .repb1 img{border:0 none;cursor:pointer;margin:0 0 0 5px}
    #smileyblog{width:190px;position:absolute;z-index:100;background:none repeat scroll 0 0 #fff;border:1px solid #ddd;top:27px;right:-1px;display:none;padding:10px}

</code>

Thay code sau vào Templates viewcomments_body

<code>
    <span id="changeSfmvi" style="left: 0px; top: 47px; border-radius: 0px 3px 3px 0px; background-color: rgb(221, 221, 221); padding: 5px; width: 20px;" class="contactF">
       <img src="http://www.google.com/reader/ui/3369744051-view_options_list.png" />
       <img style="display:none" src="http://www.google.com/reader/ui/3538434020-view_options_details.png" />
    </span>
    <script type="text/javascript">
    //<![CDATA[
    var multiquote_img_off = '{JS_MULTIQUOTE_IMG_OFF}', multiquote_img_on = '{JS_MULTIQUOTE_IMG_ON}', _atr = '{JS_DIR}addthis/', _ati = '{PATH_IMG_FA}addthis/'{ADDTHIS_LANG}, addthis_localize = { share_caption: "{L_SHARE_CAPTION}", email: "{L_EMAIL}", email_caption: "{L_EMAIL_CAPTION}", favorites: "{L_SHARE_BOOKMARKS}", print: "{L_PRINT}", more: "{L_MORE}" };
    //]]>
    </script>
    <span id="tidX" style="display:none">{TOPIC_ID}</span>
    <div class="main paged">
       <div class="paged-head clearfix">
          <!-- BEGIN topicpagination -->
          <p class="paging">{PAGINATION}</p>
          <!-- END topicpagination -->
          <p class="posting">
             <!-- BEGIN switch_user_authreply -->
             <a href="{U_POST_REPLY_TOPIC}"><img src="{REPLY_IMG}" class="i_reply" alt="{L_POST_REPLY_TOPIC}" /></a>
             <!-- END switch_user_authreply -->
          </p>
       </div>{POLL_DISPLAY}
       <div class="main-head clearfix">
          <p class="h2">
             <a href="#bottom">{L_GOTO_DOWN}</a>{L_MESSAGE} [{PAGE_NUMBER}]</p>
       </div>
       <div class="main-content topic">
          <!-- BEGIN postrow -->
          <!-- BEGIN displayed -->
                 <a name="{postrow.displayed.U_POST_ID}"></a>
          <div id="p{postrow.displayed.U_POST_ID}" class="post" {postrow.displayed.THANK_BGCOLOR}>
             <div class="postmain" {postrow.displayed.THANK_BGCOLOR}>
                <div class="posthead" style="position: relative;" {postrow.displayed.THANK_BGCOLOR}>
                                         <div class="rootvote" style="left: 867px;"><img class="fmvistar" alt="50,32,50" src="http://i12.servimg.com/u/f12/17/70/81/78/13581110.png" /><img class="fmvistar" alt="30,20,20" src="http://i12.servimg.com/u/f12/17/70/81/78/13581112.png" /><img class="fmvistar" alt="45,40,25" src="http://i12.servimg.com/u/f12/17/70/81/78/13581113.png" /><img class="fmvistar" alt="40,20,20" src="http://i12.servimg.com/u/f12/17/70/81/78/13581114.png" /><img class="fmvistar" alt="25,35,70" src="http://i12.servimg.com/u/f12/17/70/81/78/13581115.png" /><img class="fmvistar" alt="50,15,30" src="http://i12.servimg.com/u/f12/17/70/81/78/13581110.png" /><img class="fmvistar" alt="55,30,45" src="http://i12.servimg.com/u/f12/17/70/81/78/13581112.png" /><img class="fmvistar" alt="45,30,60" src="http://i12.servimg.com/u/f12/17/70/81/78/13581113.png" /><img class="fmvistar" alt="55,15,40" src="http://i12.servimg.com/u/f12/17/70/81/78/13581114.png" /><img class="fmvistar" alt="45,20,45" src="http://i12.servimg.com/u/f12/17/70/81/78/13581115.png" /><img class="fmviminus" src="http://i12.servimg.com/u/f12/17/70/81/78/13581111.png" /></div>
                   <span id="firstvote" class="voteBfmvi">
                   <!-- BEGIN switch_vote_active -->
                      <!-- BEGIN switch_vote -->
                      <div class="vote-button">
                                                       <a onclick="voteblog(this, 'm'); return false" class="mvote" onmouseover="show_tooltip(this, 'Quá tệ&nbsp;<img style=\'float: right\' alt=\'plus\' alt=\'minus\' src=\'http://i12.servimg.com/u/f12/17/70/81/78/sticky10.png\' />', 'FMvi.vn')" href="javascript:void(0)" alt="{postrow.displayed.switch_vote_active.switch_vote.U_VOTE_MINUS}"><img src="http://i12.servimg.com/u/f12/17/70/81/78/dislik11.png" /></a>
                         <a onclick="voteblog(this, 'p'); return false" class="pvote" onmouseover="show_tooltip(this, 'Rất hay&nbsp;<img style=\'float: right\' alt=\'plus\' alt=\'plus\' src=\'http://i12.servimg.com/u/f12/17/70/81/78/13580710.png\' />', 'FMvi.vn')" href="javascript:void(0)" alt="{postrow.displayed.switch_vote_active.switch_vote.U_VOTE_PLUS}"><img src="http://i12.servimg.com/u/f12/17/70/81/78/like_b11.png" /></a>
                      </div>
                      <!-- END switch_vote -->
                      <!-- BEGIN switch_bar -->
                      <div class="vote-bar" title="{postrow.displayed.switch_vote_active.L_VOTE_TITLE}">
                      </div>
                      <!-- END switch_bar -->
                      <!-- END switch_vote_active -->
                      </span>
                   <h2>{postrow.displayed.ICON} <a class="tieudeT" href="{postrow.displayed.POST_URL}">{postrow.displayed.POST_SUBJECT}</a></h2>
                </div>
                <div class="postbody" {postrow.displayed.THANK_BGCOLOR}>
                   <div class="user online">
                      <div class="user-ident" style="position: relative;">
                         <div class="username authblog">
                            {postrow.displayed.POSTER_NAME}
                         </div>
                         <div class="user-basic-info">
                            <div class="useravatar" style="padding: 15px 10px">{postrow.displayed.POSTER_AVATAR}</div>
                            <p class="rankimg" style="margin-left: -2px;">{postrow.displayed.RANK_IMAGE}</p>
                         </div>
                      </div>
                   </div>
                   <div class="post-entry">
                      <div class="entry-content">
                         <div>{postrow.displayed.MESSAGE}
                            <!-- BEGIN switch_attachments -->
                            <div class="clear"></div>
                            <dl class="attachbox">
                               <dt>{postrow.displayed.switch_attachments.L_ATTACHMENTS}</dt>
                               <dd>
                                  <!-- BEGIN switch_post_attachments -->
                                  <dl class="file">
                                     <dt>
                                        <img src="{postrow.displayed.switch_attachments.switch_post_attachments.U_IMG}" />
                                        <!-- BEGIN switch_dl_att -->
                                        <a class="postlink" href="{postrow.displayed.switch_attachments.switch_post_attachments.switch_dl_att.U_ATTACHMENT}">{postrow.displayed.switch_attachments.switch_post_attachments.switch_dl_att.ATTACHMENT}</a>{postrow.displayed.switch_attachments.switch_post_attachments.switch_dl_att.ATTACHMENT_DEL}
                                        <!-- END switch_dl_att -->
                                        <!-- BEGIN switch_no_dl_att -->{postrow.displayed.switch_attachments.switch_post_attachments.switch_no_dl_att.ATTACHMENT}
                                        {postrow.displayed.switch_attachments.switch_post_attachments.switch_no_dl_att.ATTACHMENT_DEL}
                                        <!-- END switch_no_dl_att -->
                                     </dt>
                                     <!-- BEGIN switch_no_comment -->
                                     <dd>
                                        <em>{postrow.displayed.switch_attachments.switch_post_attachments.switch_no_comment.ATTACHMENT_COMMENT}</em>
                                     </dd>
                                     <!-- END switch_no_comment -->
                                     <!-- BEGIN switch_no_dl_att -->
                                     <dd>
                                        <em>{postrow.displayed.switch_attachments.switch_post_attachments.switch_no_dl_att.TEXT_NO_DL}</em>
                                     </dd>
                                     <!-- END switch_no_dl_att -->
                                     <dd>({postrow.displayed.switch_attachments.switch_post_attachments.FILE_SIZE})
                                        {postrow.displayed.switch_attachments.switch_post_attachments.NB_DL}</dd>
                                  </dl>
                                  <!-- END switch_post_attachments -->
                               </dd>
                            </dl>
                            <!-- END switch_attachments -->
                         </div>
                      </div>
                   </div>
                </div>
                   <!-- BEGIN switch_signature -->
                   <div class="sig-content">
                      {postrow.displayed.SIGNATURE_NEW}
                   </div>
                   <!-- END switch_signature -->
                <div class="postfoot clearfix">
                   <div class="options-button user-contact">{postrow.displayed.PROFILE_IMG} {postrow.displayed.PM_IMG} {postrow.displayed.EMAIL_IMG}
                      <!-- BEGIN contact_field -->{postrow.displayed.contact_field.CONTENT}
                      <!-- END contact_field -->
                   </div>
                   <div class="post-options options-button">
                                                 {postrow.displayed.THANK_IMG} {postrow.displayed.MULTIQUOTE_IMG} {postrow.displayed.QUOTE_IMG} {postrow.displayed.EDIT_IMG} {postrow.displayed.DELETE_IMG} {postrow.displayed.IP_IMG} {postrow.displayed.REPORT_IMG}
                                         </div>
                </div>
             </div>
          </div>
          <!-- END displayed -->
          <!-- BEGIN hidden -->
          <p class="p-hidden">{postrow.hidden.MESSAGE}</p>
          <!-- END hidden -->
          <!-- END postrow -->
       </div>
       <div id="bookmarks">
          <!-- BEGIN social_bookmarking -->
          <a href="{social_bookmarking.URL}" title="{social_bookmarking.TITLE}" target="_blank" rel="nofollow">
             <img class="{social_bookmarking.CLASS}" src="http://illiweb.com/fa/empty.gif" alt="{social_bookmarking.TITLE}" title="{social_bookmarking.TITLE}" />
          </a>
          <!-- END social_bookmarking -->
       </div>
       <div class="clear"></div>
       <hr id="first-post-br" />
       <div class="main-content blog_comments">
          <!-- BEGIN comment -->
          <!-- BEGIN displayed -->
          <a name="{comment.displayed.U_POST_ID}"></a>
          <div id="p{comment.displayed.U_POST_ID}" class="post">
             <div class="blog_comment-avatar">{comment.displayed.POSTER_AVATAR}</div>
             <div class="postbody">
                                 <span class="nonchange"><em class="authblog">{comment.displayed.POSTER_NAME}</em>
                   <span class="onoffBlog">{comment.displayed.L_ONLINE}</span>
                                         <div class="rootvote"><img class="fmvistar" alt="50,32,50" src="http://i12.servimg.com/u/f12/17/70/81/78/13581110.png" /><img class="fmvistar" alt="30,20,20" src="http://i12.servimg.com/u/f12/17/70/81/78/13581112.png" /><img class="fmvistar" alt="45,40,25" src="http://i12.servimg.com/u/f12/17/70/81/78/13581113.png" /><img class="fmvistar" alt="40,20,20" src="http://i12.servimg.com/u/f12/17/70/81/78/13581114.png" /><img class="fmvistar" alt="25,35,70" src="http://i12.servimg.com/u/f12/17/70/81/78/13581115.png" /><img class="fmvistar" alt="50,15,30" src="http://i12.servimg.com/u/f12/17/70/81/78/13581110.png" /><img class="fmvistar" alt="55,30,45" src="http://i12.servimg.com/u/f12/17/70/81/78/13581112.png" /><img class="fmvistar" alt="45,30,60" src="http://i12.servimg.com/u/f12/17/70/81/78/13581113.png" /><img class="fmvistar" alt="55,15,40" src="http://i12.servimg.com/u/f12/17/70/81/78/13581114.png" /><img class="fmvistar" alt="45,20,45" src="http://i12.servimg.com/u/f12/17/70/81/78/13581115.png" /><img class="fmviminus" src="http://i12.servimg.com/u/f12/17/70/81/78/13581111.png" /></div>
                   <span class="voteBfmvi" style="margin: -8px 250px 0 0 !important">
                         <!-- BEGIN switch_vote_active -->
                      <!-- BEGIN switch_vote -->
                      <div class="vote-button">
                                                         <a onclick="voteblog(this, 'm'); return false" class="mvote" onmouseover="show_tooltip(this, 'Quá tệ&nbsp;<img style=\'float: right\' alt=\'plus\' alt=\'minus\' src=\'http://i12.servimg.com/u/f12/17/70/81/78/sticky10.png\' />', 'FMvi.vn')" href="javascript:void(0)" alt="{comment.displayed.switch_vote_active.switch_vote.U_VOTE_MINUS}"><img src="http://i12.servimg.com/u/f12/17/70/81/78/dislik11.png" /></a>
                         <a onclick="voteblog(this, 'p'); return false" class="pvote" onmouseover="show_tooltip(this, 'Rất hay&nbsp;<img style=\'float: right\' alt=\'plus\' alt=\'plus\' src=\'http://i12.servimg.com/u/f12/17/70/81/78/13580710.png\' />', 'FMvi.vn')" href="javascript:void(0)" alt="{comment.displayed.switch_vote_active.switch_vote.U_VOTE_PLUS}"><img src="http://i12.servimg.com/u/f12/17/70/81/78/like_b11.png" /></a>
                      </div>
                      <!-- END switch_vote -->
                      <!-- BEGIN switch_bar -->
                      <div class="vote-bar" title="{comment.displayed.switch_vote_active.L_VOTE_TITLE}">
                      </div>
                      <!-- END switch_bar -->
                   <!-- END switch_vote_active -->
                   </span>
                </span>
                <span class="comment-time">{comment.displayed.POST_DATE_NEW} {postrow.displayed.ICON}</span>
                <span class="comment-number">
                   <img src="http://i48.servimg.com/u/f48/16/58/89/73/edit_s10.png" />
                   <div class="dropMenuP options-button">
                                                 {comment.displayed.THANK_IMG} {comment.displayed.MULTIQUOTE_IMG} {comment.displayed.QUOTE_IMG} {comment.displayed.EDIT_IMG} {comment.displayed.DELETE_IMG} {comment.displayed.IP_IMG} {comment.displayed.REPORT_IMG} <a class="butrepblog" href="javascript:void(0)"><img src="http://i46.servimg.com/u/f46/15/26/55/24/quickr10.gif" title="Trả lời nhanh" alt="Trả lời nhanh" /></a>
                                            </div>
                </span>
                <span class="comment-content" {comment.displayed.THANK_BGCOLOR}>
                   <div class="post-entry">
                      <div class="entry-content">
                         <div>{comment.displayed.MESSAGE}</div>
                      </div>
                   </div>
                </span>
                <span class="dialog"></span>
             </div>
          </div>
          <!-- END displayed -->
          <!-- BEGIN hidden -->
          <p class="p-hidden">{comment.hidden.MESSAGE}</p>
          <!-- END hidden -->
          <!-- END comment -->
          <!-- BEGIN no_comment -->
          <div class="post">
             <div class="postbody no_comment butrepblog" style="margin-left: 34px;"><p style="text-align: center; float: none; font-size: 15px; padding: 20px 0px ! important;" class="button">Hãy là người đầu tiên bình luận blog này!</p></div>
          </div>
          <!-- END no_comment -->
          <div class="clearfix">
             <p class="h2"></p>
             <p class="options options-button">
                <input type="hidden" name="t" value="{TOPIC_ID}" />
                <!-- <input type="hidden" name="sid" value="{S_SID}" />-->
                <input type="hidden" name="{SECURE_ID_NAME}" value="{SECURE_ID_VALUE}"
                />
                <!-- BEGIN viewtopic_bottom -->{S_TOPIC_ADMIN}
                <!-- END viewtopic_bottom -->
             </p>
          </div>

          <a name="bottomtitle"></a>
          <div class="paged-foot clearfix">
             <!-- BEGIN topicpagination -->
             <p class="paging">{PAGINATION}</p>
             <!-- END topicpagination -->
             <p class="posting">
                <!-- BEGIN switch_user_authreply -->
                <a href="{U_POST_REPLY_TOPIC}"><img src="{REPLY_IMG}" class="i_reply" alt="{L_POST_REPLY_TOPIC}" /></a>
                <!-- END switch_user_authreply -->
             </p>
          </div>
       </div>
    </div>
    <p style="padding: 20px 0; text-align: center">« <a href="{U_VIEW_OLDER_TOPIC}">Xem bài trước</a> | <a href="{U_VIEW_NEWER_TOPIC}">Xem bài kế tiếp</a> »</p>
    <script type="text/javascript" src="http://goo.gl/8uKL7"></script>
    <div class="fmviToggle" style="float: right; width: 270px;">
       <div class="main">
          <div class="main-head clearfix">
             <p class="h2" style="width: 220px !important">Quyền hạn của bạn:</p>
          </div>
                 <div id="onlinelist">{S_AUTH_LIST}
                   <hr style="border: 1px dashed rgb(51, 51, 51); margin: 3px 0px;" />
                      HTML is OFF<br />
             BBCode is ON<br />
             Smilies are ON<br />
                 </div>
       </div>
    </div>
    <div class="main" id="lastFMvi">
       <div class="main-head clearfix" style="width: 624px;">
          <p class="h2" style="width: 220px !important">Bài viết liên quan:</p>
       </div>
       <div id="lienquan" style="border: 1px solid rgb(102, 102, 102); padding: 10px 8px; width: 632px;">
          <ul class="latest_topics">
          </ul>
       </div>
    </div>

    <!-- BEGIN switch_user_logged_in -->
    {QUICK_REPLY_FORM}
    <!-- END switch_user_logged_in -->
    <!-- BEGIN switch_image_resize -->
    <script type="text/javascript">
    <script type="text/javascript">
    //<![CDATA[
    $(resize_images({ 'selector' : '.post-entry .entry-content', 'max_width' : {switch_image_resize.IMG_RESIZE_WIDTH}, 'max_height' : {switch_image_resize.IMG_RESIZE_HEIGHT} }));
    //]]>
    </script>
    <!-- END switch_image_resize -->
    <script src="{JS_DIR}addthis/addthis_widget.js" type="text/javascript"></script>
</code>


Ghi chú:
Trong code này đã bao gồm star rating.
Khuyến cáo up lại file javascript http://goo.gl/8uKL7 trong code
<code>$(".voteBfmvi").each(function(){var d,a,c,b,g,e,f,h,k,j;d=$(this).find(".vote-bar").attr("title");/Message reputation :/.test(d)?(a=d.split(/\W/),e=a[4],d=Math.round(e/100*a[7]),a=a[7]-d,c=Math.floor(e/ 20), b = Math.round(e/20),g=e/20):d=a=0;j=$(this).find(".vote-button");j.length?(f="v4",h="v2",k="<font color='#E2FE6C'>B\u1ea1n ch\u01b0a b\u00ecnh ch\u1ecdn b\u00e0i vi\u1ebft n\u00e0y!</font>",j="<div class='votebutton'>"+j.html()+"</div>"):(f="v3",h="v1",k="<font color='#FF5B5B'>Kh\u00f4ng th\u1ec3 b\u00ecnh ch\u1ecdn b\u00e0i vi\u1ebft n\u00e0y!</font>",j="");void 0==c||d<a&&0==d?(c=b=-1,e=0):g>c&&b>c?c=b=c:b=-1;setstar($(this),c,b,h,f,j,d,a,e,k)});$("#smileyblog img").live("click",function(){fmvismile($(this).attr("alt"));$("#smileyblog").hide()});$(".dropMenuP a[href$='&mode=quote']").live("click",function(){repblog(this);$("#quickblog_data").val("\u0110ang t\u1ea3i d\u1eef li\u1ec7u...");$.ajax({type:"GET",cache:!1,url:$(this).attr("href"),success:function(a){$("#quickblog_data").val($(a).find("#text_editor_textarea").val())}});return!1});$(".butrepblog").live("click",function(){$(".dropMenuP img[src='http://i64.servimg.com/u/f64/15/44/78/93/multiq11.gif']").length?(repblog(this),$("#quickblog_data").val("\u0110ang t\u1ea3i d\u1eef li\u1ec7u..."),$.ajax({type:"GET",cache:!1,url:$(".posting a:first").attr("href"),success:function(a){$("#quickblog_data").val($(a).find("#text_editor_textarea").val());$(".dropMenuP img[src='http://i64.servimg.com/u/f64/15/44/78/93/multiq11.gif']").click()}})):repblog(this)});function fmvismile(a){cd=document;ln=cd.getElementById("quickblog_data");ln.focus();cd.selection?(sel=cd.selection.createRange(),c="\u0001",null!=sel.text&&(sel.text=c),end=start=ln.value.indexOf(c),-1==end&&(end=start=ln.value.length),sel.moveStart("character",-1),sel.text=""):"null"!=ln.selectionStart&&(start=ln.selectionStart,end=ln.selectionEnd);spce=" "==ln.value.charAt(end)?!0:!1;a=(0==start||" "==ln.value.charAt(start-1)?"":" ")+a;a+=spce?"":" ";ln.value=ln.value.substring(0,start)+a+ln.value.substring(end);caret=start+a.length+(spce?1:0);cd.selection?(sel.moveEnd("character",-ln.value.length),sel.moveEnd("character",caret),sel.moveStart("character",caret),sel.select()):"null"!=ln.selectionStart&&(ln.selectionStart=caret,ln.selectionEnd=caret)}function repblog(d){if($("#logout").length)if($("#pun-qpost").length)if($(".bvreply4").length)$(d).parents(".post").after($(".post.bvreply4"));else{var b=new Date,a=$("#userID a").attr("href").split("u=")[1],c=$("#quick_reply input[name='lt']").val();$(d).parents(".post").after('<div id="fmvi'+c+'" class="post bvreply4"><div class="blog_comment-avatar"><a href="/u'+a+'"><img src="'+$("#myAvatar a[href='/profile?mode=editprofile'] img").attr("src")+'" alt="avatar" /></a></div><div class="postbody"><div class="repb1"><span class="closeFMvi_like" style="left: 10px;" onclick="closerblpg(this)"></span><p id="tipblogre" class="nonchange" style="color:#000;padding-left:20px">N\u1ed9i dung ph\u1ea3i tu\u00e2n th\u1ee7 <a style="color:#216A8C" target="_blank" href="/h163-noi-quy-fmvi#rules">qui \u0111\u1ecbnh</a> c\u1ee7a di\u1ec5n \u0111\u00e0n, v\u00e0 ph\u1ea3i nhi\u1ec1u h\u01a1n <span id="gioihanrep" style="color:red">20</span> k\u00fd t\u1ef1.</p><p style="float:right"><img title="spoiler" onclick="fmvi_qr(\'[spoiler]\', \'[/spoiler]\')" src="http://i12.servimg.com/u/f12/17/70/81/78/spoile10.gif" alt="spoiler" /><img onclick="fmvi_qr(\'[b]\', \'[/b]\')" alt="Bold" src="http://illiweb.com/fa/wysiwyg/text_bold.png" title="Bold" /><img onclick="fmvi_qr(\'[i]\', \'[/i]\')" alt="Ital." src="http://illiweb.com/fa/wysiwyg/text_italic.png" title="Ital." /><img onclick="fmvi_qr(\'[center]\', \'[/center]\')" alt="Center" src="http://illiweb.com/fa/wysiwyg/text_align_center.png" title="Center" /><img onclick="fmvi_qr(\'[right]\', \'[/right]\')" alt="Right" src="http://illiweb.com/fa/wysiwyg/text_align_right.png" title="Right" /><img onclick="fmvi_qr(\'[color=red]\', \'[/color]\')" alt="Red" src="http://i12.servimg.com/u/f12/17/70/81/78/red10.png" title="Red" /><img onclick="fmvi_qr(\'[color=blue]\', \'[/color]\')" alt="Blue" src="http://i12.servimg.com/u/f12/17/70/81/78/blue10.png" title="Blue" /><img onclick="fmvi_qr(\'[color=green]\', \'[/color]\')" alt="Green" src="http://i12.servimg.com/u/f12/17/70/81/78/green10.png" title="Green" /><img onclick="fmvi_qr(\'[size=9]\', \'[/size]\')" alt="Small" src="http://i15.servimg.com/u/f15/16/58/89/73/icon-f11.png" title="Small" /><img onclick="fmvi_qr(\'[size=18]\', \'[/size]\')" alt="Large" src="http://i15.servimg.com/u/f15/16/58/89/73/icon-f10.png" title="Large" /><img onclick="$(\'#smileyblog\').toggle()" alt="smiley" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/650269930.gif" title="smiley" /><span id="smileyblog"><img alt=":D" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/364988687.gif" /><img alt=":-O" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/284475322.gif" /><img alt=":((" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/3193290500.gif" /><img alt="=))" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/3573983318.gif" /><img alt="I-)" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/3801263582.gif" /><img alt=";;)" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/2843714615.gif" /><img alt=":-/" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/1564925666.gif" /><img alt=":>" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/1672210715.gif" /><img alt="#-o" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/946669453.gif" /><img alt="/:)" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/2873859802.gif" /><img alt=":-S" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/83223541.gif" /><img alt="8-|" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/2896169666.gif" /><img alt=";))" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/451496474.gif" /><img alt=":-?" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/1089588870.gif" /><img alt="=;" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/2587538277.gif" /><img alt=":-*" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/757869165.gif" /><img alt=":-SS" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/3987938483.gif" /><img alt="=D>" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/2529965000.gif" /><img alt="[-O<" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/3823316019.gif" /><img alt="\\\\:D/" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/2887955155.gif" /><img alt=":))" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/3494493907.gif" /><img alt=":)" src="http://r12.imgfast.net/users/1215/11/75/00/smiles/650269930.gif" /></span></p></div><div style="display: none" class="repb2"><span class="nonchange"><em class="authblog"><a href="/u'+a+'"><span style="color:'+Ufmvi[a][0]+'"><strong>'+$("#userID a").text()+'</strong></span></a></em><span class="onoffBlog"> <em>(Online)</em></span><div class="rootvote"><img class="fmvistar" alt="50,32,50" src="http://i12.servimg.com/u/f12/17/70/81/78/13581110.png" title="50,32,50" /><img class="fmvistar" alt="30,20,20" src="http://i12.servimg.com/u/f12/17/70/81/78/13581112.png" title="30,20,20" /><img class="fmvistar" alt="45,40,25" src="http://i12.servimg.com/u/f12/17/70/81/78/13581113.png" title="45,40,25" /><img class="fmvistar" alt="40,20,20" src="http://i12.servimg.com/u/f12/17/70/81/78/13581114.png" title="40,20,20" /><img class="fmvistar" alt="25,35,70" src="http://i12.servimg.com/u/f12/17/70/81/78/13581115.png" title="25,35,70" /><img class="fmvistar" alt="50,15,30" src="http://i12.servimg.com/u/f12/17/70/81/78/13581110.png" title="50,15,30" /><img class="fmvistar" alt="55,30,45" src="http://i12.servimg.com/u/f12/17/70/81/78/13581112.png" title="55,30,45" /><img class="fmvistar" alt="45,30,60" src="http://i12.servimg.com/u/f12/17/70/81/78/13581113.png" title="45,30,60" /><img class="fmvistar" alt="55,15,40" src="http://i12.servimg.com/u/f12/17/70/81/78/13581114.png" title="55,15,40" /><img class="fmvistar" alt="45,20,45" src="http://i12.servimg.com/u/f12/17/70/81/78/13581115.png" title="45,20,45" /><img class="fmviminus" src="http://i12.servimg.com/u/f12/17/70/81/78/13581111.png" /></div><span class="voteBfmvi" style="margin: -8px 250px 0 0 !important"><div class="voteshow" onmouseover="show_tooltip(this, $(this).parent().find(&quot;div:last&quot;).html(), &quot;FMvi.vn&quot;)" title=""><div class="voteStar"></div><div class="voteStar"></div><div class="voteStar"></div><div class="voteStar"></div><div class="voteStar"></div></div><div style="display:none"><h3 class="tiplFMvi" style="color:#0099FF">TH\u00d4NG TIN B\u00ccNH CH\u1eccN</h3><p><strong>Th\u00edch:</strong>&nbsp;<span class="bloglike" style="color:#FF66CC">0</span>&nbsp;l\u01b0\u1ee3t</p><p><strong>Kh\u00f4ng th\u00edch:</strong>&nbsp;<span class="blogdlike" style="color:#009933">0</span>&nbsp;l\u01b0\u1ee3t</p><p><strong>T\u1ec9 l\u1ec7 b\u00ecnh ch\u1ecdn:</strong>&nbsp;<span class="blogtlike" style="color:#FF6600">0</span>%</p><p class="votetip"><font color="#FF5B5B">Kh\u00f4ng th\u1ec3 b\u00ecnh ch\u1ecdn b\u00e0i vi\u1ebft n\u00e0y!</font></p></div></span></span><span class="comment-time">Today at '+(b.getUTCHours()+7)+":"+b.getUTCMinutes()+' </span><span class="comment-number"><img src="http://i48.servimg.com/u/f48/16/58/89/73/edit_s10.png" /><div class="dropMenuP options-button"><img class="notrepblog" alt="loading" src="http://i12.servimg.com/u/f12/17/70/81/78/loadin11.gif" /></div></span></div><span class="comment-content"><div class="post-entry"><div class="entry-content"><div class="quickblog"><div id="baivong_rep" onclick="$(this).hide()"></div><textarea onscroll="fixscroll(this)" id="quickblog_data" cols="95" rows="10"></textarea><input type="submit" onclick="previewblog()" value="Xem th\u1eed" /><input type="submit" onclick="quickblog(this)" value="G\u1eedi" style="margin-left: 20px;"/><input type="submit" onclick="fulledit()" value="\u0110\u1ea7y \u0111\u1ee7 ch\u1ee9c n\u0103ng" style="float: right ! important;"/></div></div></div></span><span class="dialog"></span></div></div>');window.scrollTo(0,$("#fmvi"+c).offset().top)}else fmvitip("error","L\u1ed7i!","B\u1ea1n kh\u00f4ng \u0111\u01b0\u1ee3c ph\u00e9p b\u00ecnh lu\u1eadn t\u1ea1i chuy\u00ean m\u1ee5c n\u00e0y.");else fmvitip("error","L\u1ed7i!","B\u1ea1n c\u1ea7n ph\u1ea3i \u0111\u0103ng nh\u1eadp \u0111\u1ec3 c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.");stip()}function fixscroll(z){if(0!=$(z).scrollTop())var a=$(z).scrollTop();if(0!=$(z).scrollLeft())var b=$(z).scrollLeft();$(z).parents(".postbody").find(".repb1 img").click(function(){$(z).scrollTop(a);$(z).scrollLeft(b)})}function fulledit(){$("#text_editor_textarea").val($("#quickblog_data").val());$("#quick_reply").submit()}function quickblog(d){var a=$("#quickblog_data").val(),c=a.replace(/\s/gi,"").length;if(20>c&&0<=c)$("#tipblogre").html("N\u1ed9i dung qu\u00e1 ng\u1eafn, b\u1ea1n c\u1ea7n nh\u1eadp th\u00eam \u00edt nh\u1ea5t <span style='color:red'>"+(20-eval(c))+"</span> k\u00fd t\u1ef1 n\u1eefa.");else{blogreply($("#quickblog_data").val(),$("#quick_reply input[name='t']").val(),$("#quick_reply input[name='lt']").val(),$(d).parents(".post").attr("id"));$(d).parent().replaceWith("<div>"+quickrep4()+"</div>")}}function previewblog(){$("#baivong_rep").height($("#quickblog_data").height()).html(quickrep4()).show()}function quickrep4(){var a=$("#quickblog_data").val();a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;");/\[code\]([\s\S]*?)\[\/code\]/g.test(a)&&(a=a.replace(/\[code\]/g,"<dl class='codebox'><dt>Code:</dt><dd class='cont_code'><code>"),a=a.replace(/\[\/code\]/g,"</code></dd></dl>"));/\[b\]([\s\S]*?)\[\/b\]/g.test(a)&&(a=a.replace(/\[b\]/g,"<b>"),a=a.replace(/\[\/b\]/g,"</b>"));/\[i\]([\s\S]*?)\[\/i\]/g.test(a)&&(a=a.replace(/\[i\]/g,"<i>"),a=a.replace(/\[\/i\]/g,"</i>"));/\[u\]([\s\S]*?)\[\/u\]/g.test(a)&&(a=a.replace(/\[u\]/g,"<u>"),a=a.replace(/\[\/u\]/g,"</u>"));/\[strike\]([\s\S]*?)\[\/strike\]/g.test(a)&&(a=a.replace(/\[strike\]/g,"<strike>"),a=a.replace(/\[\/strike\]/g,"</strike>"));/\[left\]([\s\S]*?)\[\/left\]/g.test(a)&&(a=a.replace(/\[left\]/g,"<div align='left'>"),a=a.replace(/\[\/left\]/g,"</div>"));/\[right\]([\s\S]*?)\[\/right\]/g.test(a)&&(a=a.replace(/\[right\]/g,"<div align='right'>"),a=a.replace(/\[\/right\]/g,"</div>"));/\[center\]([\s\S]*?)\[\/center\]/g.test(a)&&(a=a.replace(/\[center\]/g,"<div style='margin:auto;text-align:center;width:100%'>"),a=a.replace(/\[\/center\]/g,"</div>"));/\[justify\]([\s\S]*?)\[\/justify\]/g.test(a)&&(a=a.replace(/\[justify\]/g,"<div align='justify'>"),a=a.replace(/\[\/justify\]/g,"</div>"));/\[list(\=(\w))?\]([\s\S]*?)\[\/list\]/g.test(a)&&(a=a.replace(/\[\*\]/g,"<li>"),a=a.replace(/\[list\=(\w)\]([\s\S]*?)\[\/list\]/g,"<ol type='$1'>$2</ul>"),a=a.replace(/\[list\]/g,"<ul>"),a=a.replace(/\[\/list\]/g,"</ul>"));/\[table(.*?)\]([\s\S]*?)\[\/table\]/g.test(a)&&(/\[tr\]([\s\S]*?)\[\/tr\]/g.test(a)&&/\[td(.*?)\]([\s\S]*?)\[\/td\]/g.test(a))&&(a=a.replace(/\[table(.*?)\]/g,"<table$1><tbody>"),a=a.replace(/\[\/table\]/g,"</tbody></table>"),a=a.replace(/\[tr\]/g,"<tr>"),a=a.replace(/\[\/tr\]/g,"</tr>"),a=a.replace(/\[td(.*?)\]/g,"<td$1>"),a=a.replace(/\[\/td\]/g,"</td>"));a=a.replace(/([\w\.\-]{1,}\@[\w\-]{1,}\.[\w\.\-]{1,})/g,'<a href="mailto:$1">$1</a>');a=a.replace(/\s(\www\.\S{1,}\.\S{1,})\s/g,'<a rel="nofollow" target="_blank" href="http://$1">$1</a>');a=a.replace(/\s((https?|fpt):\/\/(\S{1,}\.\S{1,}))\s/g,'<a rel="nofollow" target="_blank" href="$1">$1</a>');a=a.replace(/\[url]((https?|fpt):\/\/\S{1,}\.\S{1,})\[\/url\]/g,'<a rel="nofollow" target="_blank" href="$1">$1</a>');a=a.replace(/\[url=((https?|fpt):\/\/\S{1,}\.\S{1,})](.*?)\[\/url\]/g,'<a rel="nofollow" target="_blank" href="$1">$3</a>');a=a.replace(/\[flash\]((https?|fpt):\/\/\S{1,}\.\S{1,})\[\/flash\]/g,'<embed scale="exactfit" quality="high" wmode="transparent" type="application/x-shockwave-flash" src="$1">');a=a.replace(/\[flash\((\d+)\,(\d+)\)\]((https?|fpt):\/\/\S{1,}\.\S{1,})\[\/flash\]/g,'<embed width="$1" height="$2" scale="exactfit" quality="high" wmode="transparent" type="application/x-shockwave-flash" src="$3">');a=a.replace(/\[youtube\](https?|fpt):\/\/www\.youtube\.com\/watch\S{1,}v\=([\w\-]*)\S*?\[\/youtube\]/g,'<embed width="425" height="350" scale="exactfit" quality="high" wmode="transparent" type="application/x-shockwave-flash" src="http://www.youtube.com/v/$2" pluginspage="http://www.macromedia.com/go/getflashplayer">');a=a.replace(/\[dailymotion\](https?|fpt):\/\/www\.dailymotion\.com\/video\/([\w\-]*)\[\/dailymotion\]/g,'<embed width="425" height="335" scale="exactfit" quality="high" wmode="transparent" type="application/x-shockwave-flash" src="http://www.dailymotion.com/swf/$2" pluginspage="http://www.macromedia.com/go/getflashplayer">');/\[size=(\d{1,2})\]([\s\S]*?)\[\/size\]/g.test(a)&&(a=a.replace(/\[size=(\d)\]/g,'<span style="font-size: $1px; line-height: normal">'),a=a.replace(/\[size=([12][0-9])\]/g,'<span style="font-size: $1px; line-height: normal">'),a=a.replace(/\[\/size\]/g,"</span>"));/\[font=([\s\w]*)\]([\s\S]*?)\[\/font\]/g.test(a)&&(a=a.replace(/\[font\=([\s\w]*)\]/g,'<font face="$1">'),a=a.replace(/\[\/font\]/g,"</font>"));/\[color\=([\w\#]*)\]([\s\S]*?)\[\/color\]/g.test(a)&&(a=a.replace(/\[color\=([\w\#]*)\]/g,'<font color="$1">'),a=a.replace(/\[\/color\]/g,"</font>"));/\[sub\]([\s\S]*?)\[\/sub\]/g.test(a)&&(a=a.replace(/\[sub\]/g,"<sub>"),a=a.replace(/\[\/sub\]/g,"</sub>"));/\[sup\]([\s\S]*?)\[\/sup\]/g.test(a)&&(a=a.replace(/\[sup\]/g,"<sup>"),a=a.replace(/\[\/sup\]/g,"</sup>"));/\[quote(="([^"\n\[\]\>\<]*)")?\]([\s\S]*?)\[\/quote\]/g.test(a)&&(a=a.replace(/\[quote="([^"\n\[\]\>\<]*)"\]/g,"<blockquote><div><cite>$1 wrote:</cite>"),a=a.replace(/\[quote\]/g,"<blockquote><div>"),a=a.replace(/\[\/quote\]/g,"</div></blockquote>"));/\[spoiler(=([^"\n\[\]\>\<]*))?\]([\s\S]*?)\[\/spoiler\]/g.test(a)&&(a=a.replace(/\[spoiler\]/g,"<dl class='codebox spoiler'><dt style='cursor: pointer;'>Spoiler:</dt><dd><div class='spoiler_content'>"),a=a.replace(/\[spoiler=([^"\n\[\]\>\<]*)\]/g,"<dl class='codebox spoiler'><dt style='cursor: pointer;'>$1</dt><dd><div class='spoiler_content'>"),a=a.replace(/\[\/spoiler\]/g,"</div></dd></dl>"));/\[hide\]([\s\S]*?)\[\/hide\]/g.test(a)&&(a=a.replace(/\[hide\]/g,'<table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tbody><tr><td class="quote">'),a=a.replace(/\[\/hide\]/g,"</td></tr></tbody></table>"));/\[scroll\]([\s\S]*?)\[\/scroll\]/g.test(a)&&(a=a.replace(/\[scroll\]/g,"<span><marquee>"),a=a.replace(/\[\/scroll\]/g,"</marquee></span>"));/\[updown\]([\s\S]*?)\[\/updown\]/g.test(a)&&(a=a.replace(/\[updown\]/g,'<marquee style="height: 60px;" scrollamount="1" direction="up">'),a=a.replace(/\[\/updown\]/g,"</marquee>"));/\[flipv\]([\s\S]*?)\[\/flipv\]/g.test(a)&&(a=a.replace(/\[flipv\]/g,'<span class="flipV">'),a=a.replace(/\[\/flipv\]/g,"</span>"));/\[fliph\]([\s\S]*?)\[\/fliph\]/g.test(a)&&(a=a.replace(/\[fliph\]/g,'<span class="flipH">'),a=a.replace(/\[\/fliph\]/g,"</span>"));/\[fade\]([\s\S]*?)\[\/fade\]/g.test(a)&&(a=a.replace(/\[fade\]/g,'<span class="fade">'),a=a.replace(/\[\/fade\]/g,"</span>"));/\[blur\]([\s\S]*?)\[\/blur\]/g.test(a)&&(a=a.replace(/\[blur\]/g,'<span class="blur">'),a=a.replace(/\[\/blur\]/g,"</span>"));a=a.replace(/\[img\]((https?|fpt):\/\/\S{1,}\.\S{1,}(.*?))\[\/img\]/g,'<img alt="www.fmvi.vn" src="$1">');a=a.replace(/\[img\((\d*)px,(\d*)px\)\]((https?|fpt):\/\/\S{1,}\.\S{1,}(.*?))\[\/img\]/g,'<img style="width: $1px; height: $2px" alt="www.fmvi.vn" src="$3">');a=a.replace(/\[img\]((https?|fpt):\/\/\S{1,}\.\S{1,}(.*?))\[\/img\]/g,'<img alt="www.fmvi.vn" src="$1">');a=a.replace(/\[hr\]/g,"<hr />");a=a.replace(/\n/g,"<br />");a=a.replace(/\:D\s/g,"<img alt=':D' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/364988687.gif' /> ");a=a.replace(/\:-O\s/g,"<img alt=':-O' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/284475322.gif' /> ");a=a.replace(/\:\(\(\s/g,"<img alt=':((' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/3193290500.gif' /> ");a=a.replace(/\=\)\)\s/g,"<img alt='=))' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/3573983318.gif' /> ");a=a.replace(/I-\)\s/g,"<img alt='I-)' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/3801263582.gif' /> ");a=a.replace(/;;\)\s/g,"<img alt=';;)' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/2843714615.gif' /> ");a=a.replace(/\:-\/\s/g,"<img alt=':-\' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/1564925666.gif' /> ");a=a.replace(/\#-o\s/g,"<img alt='#-o' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/946669453.gif' /> ");a=a.replace(/\/\:\)\s/g,"<img alt='/:)' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/2873859802.gif' /> ");a=a.replace(/\:-S\s/g,"<img alt=':-S' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/83223541.gif' /> ");a=a.replace(/8-\|\s/g,"<img alt='8-|' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/2896169666.gif' /> ");a=a.replace(/;\)\)\s/g,"<img alt=';))' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/451496474.gif' /> ");a=a.replace(/\:-\?\s/g,"<img alt=':-?' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/1089588870.gif' /> ");a=a.replace(/\=;\s/g,"<img alt='=;' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/2587538277.gif' /> ");a=a.replace(/\:-\*\s/g,"<img alt=':-*' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/757869165.gif' /> ");a=a.replace(/\:-SS\s/g,"<img alt=':-SS' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/3987938483.gif' /> ");a=a.replace(/\\\\\:D\/\s/g,"<img alt='\\:D/' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/2887955155.gif' /> ");a=a.replace(/\:\)\s/g,"<img alt=':)' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/650269930.gif' /> ");a=a.replace(/\:\)\)\s/g,"<img alt=':))' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/3494493907.gif' /> ");a=a.replace(/\:&gt;\s/g,"<img alt=':>' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/1672210715.gif' /> ");a=a.replace(/\=D&gt;\s/g,"<img alt='=D>' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/2529965000.gif' /> ");a=a.replace(/\[-O&lt;\s/g,"<img alt='[-O<' src='http://r12.imgfast.net/users/1215/11/75/00/smiles/3823316019.gif' /> ");return a}function fmvi_qr(d,a){var c=!1,b=document.getElementById("quickblog_data");if(4<=clientVer&&is_ie&&is_win){if(c=document.selection.createRange().text)document.selection.createRange().text=d+c+a;b.focus()}else if(b.selectionEnd&&0<b.selectionEnd-b.selectionStart){var c=b.textLength,g=b.selectionStart,e=b.selectionEnd;if(1==e||2==e)e=c;var f=b.value.substring(0,g);if(1==e||2==e)e=c;g=b.value.substring(g,e);c=b.value.substring(e,c);b.value=f+d+g+a+c}}function blogreply(d,a,c,b){$.ajax({type:"POST",cache:!1,url:"/post",data:{mode:"reply",message:d,t:a,lt:c,"auth[]":$("input[name='auth\[\]']:last").val(),post:"Send"},success:function(a){$(a).find(".frm-form").length&&$(a).find("#main-content .main-content>p.p-hidden").length?blogreply($(a).find(".frm-buttons textarea[name='message']").val(),$(a).find(".frm-buttons input[name='t']").val(),$(a).find(".frm-buttons input[name='lt']").val(),b):$(a).find("#main-content .main-content>p.center").length?(fmvitip("error","B\u1ea1n ch\u01b0a th\u1ec3 g\u1eedi b\u00e0i v\u00e0o l\u00fac n\u00e0y!","Vui l\u00f2ng ch\u1edd <span style='color:red'>"+$(a).find(".main-content p.center").text().match(/[0-9]+/)+"</span> gi\u00e2y gi\u1eefa hai l\u1ea7n g\u1eedi b\u00e0i."),stip(),$("#"+b).remove()):0==$(a).find(".frm-form").length&&(a=$(a).find(".main-content.message p.message a:first").attr("href").split("#")[1],$("#"+b+" .dropMenuP.options-button").html('<img id="post_mq'+$("#quick_reply input[name='t']").val()+"_"+a+'" src="http://i64.servimg.com/u/f64/15/44/78/93/multiq10.gif" alt="Select/Unselect multi-quote" title="Select/Unselect multi-quote" onclick="togglePostMultiQuote(this);"> <a href="/post?p='+a+'&mode=quote"><img src="http://i64.servimg.com/u/f64/15/44/78/93/quote110.gif" class="i_icon_quote" alt="Tr\u1ea3 l\u1eddi v\u1edbi tr\u00edch d\u1eabn n\u1ed9i dung b\u00e0i vi\u1ebft n\u00e0y" title="Tr\u1ea3 l\u1eddi v\u1edbi tr\u00edch d\u1eabn n\u1ed9i dung b\u00e0i vi\u1ebft n\u00e0y" /></a> <a href="/post?p='+a+'&mode=editpost"><img src="http://i64.servimg.com/u/f64/15/44/78/93/edit1010.gif" class="i_icon_edit" alt="S\u1eeda/X\u00f3a b\u00e0i vi\u1ebft" title="S\u1eeda/X\u00f3a b\u00e0i vi\u1ebft" /></a> <a href="/post?p='+a+"&tid="+$("#quick_reply input[name='tid']").val()+'&mode=delete"><img src="http://i46.servimg.com/u/f46/15/26/55/24/post_t10.gif" class="i_icon_delete" alt="X\u00f3a b\u00e0i vi\u1ebft" title="X\u00f3a b\u00e0i vi\u1ebft" /></a> <a href="/report?mode=report&p='+a+'"><img src="http://illiweb.com/fa/prosilver/icon_post_report.gif" alt="Report post to moderator or admin" title="Report post to moderator or admin" /></a> <a href="/report?mode=lock&p='+a+'"><img src="http://illiweb.com/fa/prosilver/icon_report_close.png" alt="Lock post for new reports" title="Lock post for new reports" /></a><a class="butrepblog" onclick="repblog(this)" href="javascript:void(0)"><img src="http://i46.servimg.com/u/f46/15/26/55/24/quickr10.gif" title="Tr\u1ea3 l\u1eddi nhanh" alt="Tr\u1ea3 l\u1eddi nhanh" /></a>'),$("#"+b+" .repb1").remove(),$("#"+b+" .repb2").show(),$("#quick_reply input[name='lt']").val(a),$("#"+b).before('<a name="'+(a+1)+'"></a>'))}})}function closerblpg(a){$(a).parents(".post").remove()}function voteblog(d,a){$("#tooltip").css("visibility","hidden");var c,b,g,e,f,h;c=$(d).parents(".voteBfmvi");b=eval(c.find(".bloglike").text());s=eval(c.find(".blogdlike").text());$.post($(d).attr("alt"));f=$(d).parents(".post");q="b\u00e0i vi\u1ebft c\u1ee7a [color=green][b][i]"+f.find(".authblog").text()+"[/i][/b][/color] t\u1ea1i [url=http://"+location.host+location.pathname+"?showpost="+f.prev().attr("name")+"]"+$(".tieudeT").text()+"[/url]";"p"==a?(e=b+1,sendbot("th\u00edch "+q),c.prev(".rootvote").find(".fmvistar").show().each(function(){var a=$(this).attr("alt").split(",");$(this).animate({right:a[0],width:a[1],height:a[1],top:a[2],opacity:0},1E3,function(){c.prev(".rootvote").remove()})})):(g=s+1,sendbot("kh\u00f4ng th\u00edch "+q),c.prev(".rootvote").find(".fmviminus").show().animate({right:-20,width:50,height:50,top:-20,opacity:0},1E3,function(){c.prev(".rootvote").remove()}));c.find(".bloglike").text(e);c.find(".blogdlike").text(g);b=eval(c.find(".bloglike").text());g=eval(c.find(".blogdlike").text());e=Math.round(100*(b/(b+g)));f=Math.floor(e/20);h=Math.round(e/20);b<g&&0==b?(h=f=-1,e=0):e/20>f&&h>f?h=f:(h=f,f=-1);setstar(c,h,f,"v1","v3","",b,g,e,"<font color='#FF5B5B'>Kh\u00f4ng th\u1ec3 b\u00ecnh ch\u1ecdn b\u00e0i vi\u1ebft n\u00e0y!</font>")}function setstar(d,a,c,b,g,e,f,h,k,j){d.html(e+"<div class='voteshow' onmouseover='show_tooltip(this, $(this).parent().find(\"div:last\").html(), \"FMvi.vn\")'><div class='voteStar'></div><div class='voteStar'></div><div class='voteStar'></div><div class='voteStar'></div><div class='voteStar'></div></div><div style='display:none'><h3 class='tiplFMvi' style='color:#0099FF'>TH\u00d4NG TIN B\u00ccNH CH\u1eccN</h3><p><strong>Th\u00edch:</strong>&nbsp;<span class='bloglike' style='color:#FF66CC'>"+f+"</span>&nbsp;l\u01b0\u1ee3t</p><p><strong>Kh\u00f4ng th\u00edch:</strong>&nbsp;<span class='blogdlike' style='color:#009933'>"+h+"</span>&nbsp;l\u01b0\u1ee3t</p><p><strong>T\u1ec9 l\u1ec7 b\u00ecnh ch\u1ecdn:</strong>&nbsp;<span class='blogtlike' style='color:#FF6600'>"+k+"</span>%</p><p class='votetip'>"+j+"</p></div>").fadeIn(300);d.find(".voteStar:lt("+a+")").addClass(b);d.find(".voteStar:eq("+c+")").addClass(g)}</code>