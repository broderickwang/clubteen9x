Về bảng đăng nhập thì mỗi người một kiểu nên mình không hướng dẫn lại. Để khi đăng nhập không chuyển về trang chủ, và không cần dùng trang trung gian, bạn chỉ cần làm như sau:
Đặt code này vào trước thẻ <code></form></code> trong code đăng nhập của bạn.
<code>
<script type="text/javascript">document.write('<input type="hidden" name="redirect" value="' + location.href + '" />')</script>

</code>
Tham khảo thêm một cách khác, viết bởi ViệtK: http://diendan.chinhphuc.info/t17952-topic